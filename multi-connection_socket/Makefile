BUILD_DIRECTORY = build
SOURCES_DIRECTORY = sources

GENERAL_SOURCES = $(SOURCES_DIRECTORY)/inet_socket.c
GENERAL_OBJECTS = $(BUILD_DIRECTORY)/inet_socket.o

SERVER_SOURCES = $(SOURCES_DIRECTORY)/server.c
SERVER_OBJECTS = $(BUILD_DIRECTORY)/server.o

CLIENT_SOURCES = $(SOURCES_DIRECTORY)/client.c
CLIENT_OBJECTS = $(BUILD_DIRECTORY)/client.o

LIBRARY = -lpthread

all:
	mkdir -p $(BUILD_DIRECTORY)
	gcc -c $(GENERAL_SOURCES) -o $(GENERAL_OBJECTS)
	gcc -c $(SERVER_SOURCES) -o $(SERVER_OBJECTS)
	gcc $(SERVER_OBJECTS) $(GENERAL_OBJECTS) -o $(BUILD_DIRECTORY)/server $(LIBRARY)
	gcc -c $(CLIENT_SOURCES) -o $(CLIENT_OBJECTS)
	gcc $(CLIENT_OBJECTS) $(GENERAL_OBJECTS) -o $(BUILD_DIRECTORY)/client $(LIBRARY)

clean:
	rm -rf build